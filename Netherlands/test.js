async function initMap() {
  const { Map } = await google.maps.importLibrary("maps");
  const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");

  const map = new Map(document.getElementById("map"), {
      mapId: "99b8730fe823e746",
      zoom: 13,
      center: { lat: 52.3730357, lng: 4.8932469 },
  });

  const places = [{"notes":"","title":"Classic Tour","price":2,"type":"tour","open":"10:00-16:00","time":"2","position":{"lat":52.3730357,"lng":4.8932469},"content":"\n    <div class=\"icon\">\n        <i aria-hidden=\"true\" class=\"fa-solid fa-person-walking\"></i>\n        <span class=\"fa-sr-only\">tour</span>\n    </div>\n    <div class=\"details\">\n      <div class=\"place_name\">Classic Tour</div>\n      <div class=\"notes\"></div>\n      <div class=\"features\">\n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-solid fa-euro-sign\" style=\"color: #32b517\" title=\"Price\"></i>\n                <span class=\"fa-sr-only\">Price</span>\n                <span>2</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-calendar\" title=\"Open Times\"></i>\n                <span class=\"fa-sr-only\">Open Times</span>\n                <span>10:00-16:00</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-clock\" title=\"Estimated Time\"></i>\n                <span class=\"fa-sr-only\">Estimated Time</span>\n                <span>2</span>\n              </div>\n            \n      </div>\n    </div>\n  "},{"notes":"","title":"InstAdam Tour","price":2,"type":"tour","open":"Sat 13:30","time":"2","position":{"lat":52.3730357,"lng":4.8932469},"content":"\n    <div class=\"icon\">\n        <i aria-hidden=\"true\" class=\"fa-solid fa-person-walking\"></i>\n        <span class=\"fa-sr-only\">tour</span>\n    </div>\n    <div class=\"details\">\n      <div class=\"place_name\">InstAdam Tour</div>\n      <div class=\"notes\"></div>\n      <div class=\"features\">\n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-solid fa-euro-sign\" style=\"color: #32b517\" title=\"Price\"></i>\n                <span class=\"fa-sr-only\">Price</span>\n                <span>2</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-calendar\" title=\"Open Times\"></i>\n                <span class=\"fa-sr-only\">Open Times</span>\n                <span>Sat 13:30</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-clock\" title=\"Estimated Time\"></i>\n                <span class=\"fa-sr-only\">Estimated Time</span>\n                <span>2</span>\n              </div>\n            \n      </div>\n    </div>\n  "},{"notes":"","title":"Food Tour","price":2,"type":"tour","open":"1899-12-30T10:30:00.000Z","time":"2","position":{"lat":52.3730357,"lng":4.8932469},"content":"\n    <div class=\"icon\">\n        <i aria-hidden=\"true\" class=\"fa-solid fa-person-walking\"></i>\n        <span class=\"fa-sr-only\">tour</span>\n    </div>\n    <div class=\"details\">\n      <div class=\"place_name\">Food Tour</div>\n      <div class=\"notes\"></div>\n      <div class=\"features\">\n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-solid fa-euro-sign\" style=\"color: #32b517\" title=\"Price\"></i>\n                <span class=\"fa-sr-only\">Price</span>\n                <span>2</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-calendar\" title=\"Open Times\"></i>\n                <span class=\"fa-sr-only\">Open Times</span>\n                <span>Sat Dec 30 1899 10:30:00 GMT+0000 (Greenwich Mean Time)</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-clock\" title=\"Estimated Time\"></i>\n                <span class=\"fa-sr-only\">Estimated Time</span>\n                <span>2</span>\n              </div>\n            \n      </div>\n    </div>\n  "},{"notes":"","title":"Dark Side Tour","price":2,"type":"tour","open":"1899-12-30T16:00:00.000Z","time":"2","position":{"lat":52.3730357,"lng":4.8932469},"content":"\n    <div class=\"icon\">\n        <i aria-hidden=\"true\" class=\"fa-solid fa-person-walking\"></i>\n        <span class=\"fa-sr-only\">tour</span>\n    </div>\n    <div class=\"details\">\n      <div class=\"place_name\">Dark Side Tour</div>\n      <div class=\"notes\"></div>\n      <div class=\"features\">\n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-solid fa-euro-sign\" style=\"color: #32b517\" title=\"Price\"></i>\n                <span class=\"fa-sr-only\">Price</span>\n                <span>2</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-calendar\" title=\"Open Times\"></i>\n                <span class=\"fa-sr-only\">Open Times</span>\n                <span>Sat Dec 30 1899 16:00:00 GMT+0000 (Greenwich Mean Time)</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-clock\" title=\"Estimated Time\"></i>\n                <span class=\"fa-sr-only\">Estimated Time</span>\n                <span>2</span>\n              </div>\n            \n      </div>\n    </div>\n  "},{"notes":"Apparently these tickets are quite hard to get - so make sure to pre-book! They are also strict about arriving on time.\n\nRead Anne Frank's diary beforehand for maximum enjoyment ","title":"Anne Frank House","price":17,"type":"museum","open":"09:00-22:00","time":"1-2","position":{"lat":52.3752182,"lng":4.8839765},"content":"\n    <div class=\"icon\">\n        <i aria-hidden=\"true\" class=\"fa-solid fa-landmark\"></i>\n        <span class=\"fa-sr-only\">museum</span>\n    </div>\n    <div class=\"details\">\n      <div class=\"place_name\">Anne Frank House</div>\n      <div class=\"notes\">Apparently these tickets are quite hard to get - so make sure to pre-book! They are also strict about arriving on time.\n\nRead Anne Frank's diary beforehand for maximum enjoyment </div>\n      <div class=\"features\">\n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-solid fa-euro-sign\" style=\"color: #32b517\" title=\"Price\"></i>\n                <span class=\"fa-sr-only\">Price</span>\n                <span>17</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-calendar\" title=\"Open Times\"></i>\n                <span class=\"fa-sr-only\">Open Times</span>\n                <span>09:00-22:00</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-clock\" title=\"Estimated Time\"></i>\n                <span class=\"fa-sr-only\">Estimated Time</span>\n                <span>1-2</span>\n              </div>\n            \n      </div>\n    </div>\n  "},{"notes":"Very in demand. Pre-book VERY early.\n\nWatch a documentary on Van Gogh and try to discover more about him.","title":"Van Gogh Museum","price":22,"type":"museum","open":"09:00-18:00","time":"1-2","position":{"lat":52.3580757,"lng":4.8812053},"content":"\n    <div class=\"icon\">\n        <i aria-hidden=\"true\" class=\"fa-solid fa-landmark\"></i>\n        <span class=\"fa-sr-only\">museum</span>\n    </div>\n    <div class=\"details\">\n      <div class=\"place_name\">Van Gogh Museum</div>\n      <div class=\"notes\">Very in demand. Pre-book VERY early.\n\nWatch a documentary on Van Gogh and try to discover more about him.</div>\n      <div class=\"features\">\n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-solid fa-euro-sign\" style=\"color: #32b517\" title=\"Price\"></i>\n                <span class=\"fa-sr-only\">Price</span>\n                <span>22</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-calendar\" title=\"Open Times\"></i>\n                <span class=\"fa-sr-only\">Open Times</span>\n                <span>09:00-18:00</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-clock\" title=\"Estimated Time\"></i>\n                <span class=\"fa-sr-only\">Estimated Time</span>\n                <span>1-2</span>\n              </div>\n            \n      </div>\n    </div>\n  "},{"notes":"May be good for a **short** stop in before or after Anne Frank Museum.\n\nYou can taste test different cheeses from all over the world. It would be polite to buy something afterwards but you don't haaaaave toooooo","title":"Cheese Museum","price":0,"type":"shop","open":"09:00-20:00","time":"0.25","position":{"lat":52.376389,"lng":4.884251},"content":"\n    <div class=\"icon\">\n        <i aria-hidden=\"true\" class=\"fa-solid fa-shop\"></i>\n        <span class=\"fa-sr-only\">shop</span>\n    </div>\n    <div class=\"details\">\n      <div class=\"place_name\">Cheese Museum</div>\n      <div class=\"notes\">May be good for a **short** stop in before or after Anne Frank Museum.\n\nYou can taste test different cheeses from all over the world. It would be polite to buy something afterwards but you don't haaaaave toooooo</div>\n      <div class=\"features\">\n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-solid fa-euro-sign\" style=\"color: #32b517\" title=\"Price\"></i>\n                <span class=\"fa-sr-only\">Price</span>\n                <span>0</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-calendar\" title=\"Open Times\"></i>\n                <span class=\"fa-sr-only\">Open Times</span>\n                <span>09:00-20:00</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-clock\" title=\"Estimated Time\"></i>\n                <span class=\"fa-sr-only\">Estimated Time</span>\n                <span>0.25</span>\n              </div>\n            \n      </div>\n    </div>\n  "},{"notes":"To make the most of this, definitely check out this page: https://www.rijksmuseum.nl/en/visit/inside-the-museum\n\nWatch some documentaries on the topics listed on that page, and do some extra research on whatever peaks your interest!","title":"Rijksmuseum","price":22.5,"type":"museum","open":"09:00-17:00","time":"3-5","position":{"lat":52.3599976,"lng":4.8852188},"content":"\n    <div class=\"icon\">\n        <i aria-hidden=\"true\" class=\"fa-solid fa-landmark\"></i>\n        <span class=\"fa-sr-only\">museum</span>\n    </div>\n    <div class=\"details\">\n      <div class=\"place_name\">Rijksmuseum</div>\n      <div class=\"notes\">To make the most of this, definitely check out this page: https://www.rijksmuseum.nl/en/visit/inside-the-museum\n\nWatch some documentaries on the topics listed on that page, and do some extra research on whatever peaks your interest!</div>\n      <div class=\"features\">\n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-solid fa-euro-sign\" style=\"color: #32b517\" title=\"Price\"></i>\n                <span class=\"fa-sr-only\">Price</span>\n                <span>22.5</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-calendar\" title=\"Open Times\"></i>\n                <span class=\"fa-sr-only\">Open Times</span>\n                <span>09:00-17:00</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-clock\" title=\"Estimated Time\"></i>\n                <span class=\"fa-sr-only\">Estimated Time</span>\n                <span>3-5</span>\n              </div>\n            \n      </div>\n    </div>\n  "},{"notes":"","title":"Hash Marijuana & Hemp Museum","price":11.45,"type":"museum","open":"10:00-22:00","time":"1","position":{"lat":52.3717805,"lng":4.8969197},"content":"\n    <div class=\"icon\">\n        <i aria-hidden=\"true\" class=\"fa-solid fa-landmark\"></i>\n        <span class=\"fa-sr-only\">museum</span>\n    </div>\n    <div class=\"details\">\n      <div class=\"place_name\">Hash Marijuana & Hemp Museum</div>\n      <div class=\"notes\"></div>\n      <div class=\"features\">\n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-solid fa-euro-sign\" style=\"color: #32b517\" title=\"Price\"></i>\n                <span class=\"fa-sr-only\">Price</span>\n                <span>11.45</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-calendar\" title=\"Open Times\"></i>\n                <span class=\"fa-sr-only\">Open Times</span>\n                <span>10:00-22:00</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-clock\" title=\"Estimated Time\"></i>\n                <span class=\"fa-sr-only\">Estimated Time</span>\n                <span>1</span>\n              </div>\n            \n      </div>\n    </div>\n  "},{"notes":"","title":"Sex Museum","price":10,"type":"museum","open":"10:00-18:00","time":"0.5","position":{"lat":52.3766117,"lng":4.897228699999999},"content":"\n    <div class=\"icon\">\n        <i aria-hidden=\"true\" class=\"fa-solid fa-landmark\"></i>\n        <span class=\"fa-sr-only\">museum</span>\n    </div>\n    <div class=\"details\">\n      <div class=\"place_name\">Sex Museum</div>\n      <div class=\"notes\"></div>\n      <div class=\"features\">\n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-solid fa-euro-sign\" style=\"color: #32b517\" title=\"Price\"></i>\n                <span class=\"fa-sr-only\">Price</span>\n                <span>10</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-calendar\" title=\"Open Times\"></i>\n                <span class=\"fa-sr-only\">Open Times</span>\n                <span>10:00-18:00</span>\n              </div>\n            \n        \n              <div>\n                <i aria-hidden=\"true\" class=\"fa-regular fa-clock\" title=\"Estimated Time\"></i>\n                <span class=\"fa-sr-only\">Estimated Time</span>\n                <span>0.5</span>\n              </div>\n            \n      </div>\n    </div>\n  "}]

  for (const place of places) {
      const markerContent = document.createElement("div");
      markerContent.classList.add("place");
      markerContent.innerHTML = place.content;

      const marker =
          new AdvancedMarkerElement({
              map,
              content: markerContent,
              position: place.position,
              title: place.description,
          });

      marker.addListener("click", () => {
          if (marker.content.classList.contains("highlight")) {
              marker.content.classList.remove("highlight");
              marker.zIndex = null;
          } else {
              marker.content.classList.add("highlight");
              marker.zIndex = 1;
          }
      });
  }
}

initMap();